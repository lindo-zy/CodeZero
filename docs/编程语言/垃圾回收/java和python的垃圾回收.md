# java和python的垃圾回收

前言：java这门静态语言，python这门动态语言，他们的垃圾回收处理方式是怎么样的？让我们对比学习看看。

[TOC]

## 什么是垃圾？

比如我们创建变量、创建对象都会开辟内存空间，如果一个内存空间被划分了，但是没人用，就成了垃圾，需要把这块内存回收。垃圾堆积多了，就会造成内存溢出和内存泄漏。

## python

python垃圾回收三大法宝：引用计数、标记清除、分代回收。

### 引用计数

引用计数很好理解，python内部通过引用计数机制来统计一个对象被引用的次数。当这个数变成0的时候，就说明这个对象没有被引用了。

采用一个环状双向链表refchain，进行引用计数。

回收：从链表移除，销毁对象

### 标记清除

由于引用计数存在无法清除循环引用的问题，又引入了标记清除。

链表：放的是可能存在循环引用的对象，list/set/tuple/dict

定时查询扫描，检查是否有循环引用，如果有就-1，到0就回收

### 分代回收

分代回收：三个链表：解决多久扫描，扫描耗时问题

0代：0代中的对象达到700个

1代：0代扫描10次，1代扫描1次

2代：1代扫描10吃，2代扫描1次

## java

###### 参考

python垃圾回收：

https://blog.51cto.com/u_14666251/4674779